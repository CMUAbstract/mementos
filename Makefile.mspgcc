CC=msp430-gcc
CFLAGS=-mmcu=msp430fr5969 -Iinclude

VTHRESH=2.7

.DUMMY: all
all: libmementos_fram.a

include/mementos.h: include/mementos.h.tmpl
	scripts/setthresh.pl $(VTHRESH) $(TIMERINT) $^ > $@

%.s: %.c
	$(CC) $(CFLAGS) -S -o $@ $^

%.c: include/mementos.h

libmementos_fram.a: mementos.o mementos_fram.o
	msp430-ar r $@ $^

clean:
	$(RM) libmementos_fram.a *.o
